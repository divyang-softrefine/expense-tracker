{"mappings":"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","sources":["src/js/controller.js"],"sourcesContent":["const positive_table = document.querySelector('.table-positive');\nconst negative_table = document.querySelector('.table-negative');\nconst balanceField = document.querySelector('#current-balance');\nconst inputType = document.querySelector('#inputType');\nconst inputDesp = document.querySelector('#inputDesp');\nconst inputPrice = document.querySelector('#inputPrice');\nconst inputSubmit = document.querySelector('#submitBtn');\nconst despError = document.querySelector('#despError');\nconst priceError = document.querySelector('#priceError');\nconst typeError = document.querySelector('#typeError');\nconst totalPositive = document.querySelector('.positive').children[2].children[1];\nconst totalNegative = document.querySelector('.negative').children[2].children[1];\n\nclass data{\n    constructor(type,desp,amount){\n        this.id = String(new Date().getTime()).slice(6);\n        this.type = type;\n        this.desp = desp;\n        this.amount = +amount;\n    }\n}\n\nclass App{\n    \n    #balance;\n    #movements;\n    #positive_movements;\n    #negative_movements;\n    constructor(){\n\n        if(localStorage.getItem('positive-movements')){\n            this.#positive_movements = JSON.parse(localStorage.getItem('positive-movements'));\n\n        }else{\n            this.#positive_movements = [];\n            localStorage.setItem('positive-movements',[])\n        }\n        if(localStorage.getItem('negative-movements')){\n\n            this.#negative_movements = JSON.parse(localStorage.getItem('negative-movements'));\n        }else{\n            this.#negative_movements = [];\n            localStorage.setItem('negative-movements',[]);\n        }\n\n        this.loadBalance()\n        this.renderBalance();\n        this.onLoad();\n        this.addHandler();\n        this.renderTotals();\n        // console.log(this.#balance,this.#movements)\n    }\n    loadBalance(){\n        this.#balance = 0;\n        this.#positive_movements.forEach(ele=>this.#balance+=ele.amount);\n        this.#negative_movements.forEach(ele=>this.#balance-=ele.amount);\n\n        localStorage.setItem(`balance`,JSON.stringify(this.#balance))\n    }\n    updateBalance(amount,negative = false){\n        if(negative)\n            this.#balance -= amount;\n        else\n            this.#balance += amount;\n\n        localStorage.setItem('balance',this.#balance);\n    }\n    onLoad(){\n        let markup = `<thead>\n        <tr>\n            <th>Description</th>\n            <th>Amount</th>\n            <th>Edit</th>\n        </tr>\n    </thead>`;\n        positive_table.innerHTML = markup;\n        this.#positive_movements.forEach(ele=>this.renderData(ele,positive_table));\n\n        negative_table.innerHTML = markup;\n        this.#negative_movements.forEach(ele=>this.renderData(ele,negative_table));\n    }\n    renderData(_data,table){\n        const  markup = `<tr class=\"data-field\" data-id=${_data.id}>\n        <td class=\"description-field\">${_data.desp}</td>\n        <td class=\"amount-field\">${_data.amount}</td>\n        <td><button id='del-${_data.id}'>Delete</button></td>\n        </tr> `;\n        table.insertAdjacentHTML('beforeend',markup);\n        this.addDeleteButtonHandler(_data.id);\n    }\n    updateMovements(data){\n        // CHECK IF MOVMENT IS VALID\n        // console.log(typeof data.amount)\n        if(data.type === 'Income'){\n            this.#positive_movements.push(data);\n\n            localStorage.setItem('positive-movements',JSON.stringify(this.#positive_movements));\n            this.updateBalance(data.amount);\n            this.renderData(data,positive_table);\n        }\n        else{\n            this.#negative_movements.push(data);\n            localStorage.setItem('negative-movements',JSON.stringify(this.#negative_movements));\n\n            this.updateBalance(data.amount,true);\n            this.renderData(data,negative_table);\n        }\n        this.renderBalance();\n    }\n\n    renderTotals(){\n        let neg_sum = 0;\n        for(let i = 0; i < this.#negative_movements.length; i++)\n            neg_sum+=this.#negative_movements[i].amount;\n        let pos_sum = 0;\n        for(let i = 0; i < this.#positive_movements.length; i++)\n            pos_sum+=this.#positive_movements[i].amount;\n        \n        totalNegative.textContent = `${neg_sum} : ${Math.round((neg_sum/this.#balance )* 100)}`;\n        totalPositive.textContent =  `${pos_sum} : ${Math.round((pos_sum/this.#balance )* 100)}`;\n    }\n\n    renderBalance(){\n        balanceField.textContent = this.#balance;\n        this.#balance >= 0 ? balanceField.style.color = `green` : balanceField.style.color = `red`;\n\n        this.renderTotals();\n    }\n    addData(e){\n        e.preventDefault();\n        let desp = null;\n        let check = false;\n        if(inputType.value === 'Select'){\n            desp = despError.textContent;\n            typeError.textContent = `Only Income and Expense are allowed!!!`\n            typeError.closest('.popup').classList.add('show');\n            check = true;\n        }else{\n        typeError.closest('.popup').classList.remove('show');\n        }\n        // console.log(inputDesp.value.length)\n        if(!inputDesp.value ||(inputDesp.value && inputDesp.value.length > 128) ){\n            if(!inputDesp.value){\n                despError.textContent = `Please add Description`;\n                despError.closest('.popup').classList.add('show');\n                check = true;\n            }\n            if(inputDesp.value && inputDesp.value.length > 128){\n                despError.textContent = `Despcription should be between 1 and 128 characters, Thank you!`;\n                despError.closest('.popup').classList.add('show');\n                check = true;\n            }\n        }else{\n            despError.closest('.popup').classList.remove('show');\n        }\n\n        if(!inputPrice.value || !Number(inputPrice.value) ||Number(inputPrice.value) < 0){\n            priceError.closest('.popup').classList.add('show');\n            check = true;\n        }else{\n            priceError.closest('.popup').classList.remove('show');\n        }\n        if(check){\n            return;\n        }\n        check = false;\n        this.updateMovements(new data(inputType.value,inputDesp.value,inputPrice.value));\n        this.clearInput();\n    }\n    clearInput(){\n        document.querySelectorAll('input').forEach(ele=>{\n            if(ele.type!=='submit') ele.value = '';\n        })\n        inputType.children[0].selected = true;\n        inputType.children[1].selected = false;\n        inputType.children[2].selected = false;\n        window.requestAnimationFrame(this.color.bind(this));\n    }\n    deleteMovement(id){\n        for(let i = 0;i < this.#positive_movements.length; i++){\n            if(this.#positive_movements[i].id === id)\n            {   this.#balance -= +this.#positive_movements[i].amount;\n                localStorage.setItem('balance',this.#balance);\n                this.#positive_movements.splice(i,1);\n                localStorage.setItem('positive-movements',JSON.stringify(this.#positive_movements))\n                break;\n            }\n        }\n        for(let i = 0;i < this.#negative_movements.length; i++){\n            if(this.#negative_movements[i].id === id)\n            {   this.#balance -= +this.#negative_movements[i].amount;\n                localStorage.setItem('balance',this.#balance);\n                this.#negative_movements.splice(i,1);\n                localStorage.setItem('negative-movements',JSON.stringify(this.#negative_movements))\n                break;\n            }\n        }\n        // console.log(document.getElementsByClassName('data-field'),`helllo`);\n        this.renderBalance();\n    }\n\n    color(){\n        if(inputType.value==='Income'){\n            inputSubmit.style.background = inputDesp.style.borderColor = inputPrice.style.borderColor = 'green';\n            inputSubmit.style.color = 'white';\n        }else if(inputType.value == 'Expense'){\n            inputSubmit.style.background = inputDesp.style.borderColor = inputPrice.style.borderColor = 'red';\n            inputSubmit.style.color = 'white';\n        }else{\n            inputSubmit.style.background = inputDesp.style.borderColor = inputPrice.style.borderColor = '';\n            inputSubmit.style.color = 'black';\n        }\n    }\n    addHandler(){\n        document.querySelector('#form').addEventListener('submit',this.addData.bind(this));\n        window.addEventListener('load',this.color.bind(this));\n        inputType.addEventListener('change',this.color.bind(this));\n    }\n    \n    \n    delButton(e){\n        let text = `Do you really want to delete the element`;\n        if (confirm(text)) {\n            this.deleteMovement(e.target.id.slice(4))\n            e.target.closest('.data-field').remove();\n        }\n    }\n\n    addDeleteButtonHandler(id){\n        document.querySelector(`#del-${id}`).addEventListener('click',this.delButton.bind(this));\n    }\n}\nconst app = new App();\n"],"names":["positive_table","document","querySelector","negative_table","balanceField","inputType","inputDesp","inputPrice","inputSubmit","despError","priceError","typeError","totalPositive","children","totalNegative","data","constructor","type","desp","amount","this","id","String","Date","getTime","slice","App","balance","movements","positive_movements","negative_movements","localStorage","getItem","JSON","parse","setItem","loadBalance","renderBalance","onLoad","addHandler","renderTotals","forEach","ele","stringify","updateBalance","negative","markup","innerHTML","renderData","_data","table","insertAdjacentHTML","addDeleteButtonHandler","updateMovements","data1","push","neg_sum","i","length","pos_sum","i1","textContent","Math","round","style","color","addData","e","preventDefault","check","value","closest","classList","add","remove","Number","clearInput","querySelectorAll","selected","window","requestAnimationFrame","bind","deleteMovement","splice","i2","background","borderColor","addEventListener","delButton","confirm","target","app"],"version":3,"file":"index.759d2b99.js.map"}