{"mappings":"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","sources":["src/js/controller.js"],"sourcesContent":["const table = document.querySelector('.table');\nconst balanceField = document.querySelector('#current-balance');\nconst inputType = document.querySelector('#inputType');\nconst inputDesp = document.querySelector('#inputDesp');\nconst inputPrice = document.querySelector('#inputPrice');\nconst inputSubmit = document.querySelector('#submitBtn');\nconst despError = document.querySelector('#despError');\nconst priceError = document.querySelector('#priceError');\nconst typeError = document.querySelector('#typeError');\nclass data{\n    constructor(type,desp,amount){\n        this.id = String(new Date().getTime()).slice(6);\n        this.type = type;\n        this.desp = desp;\n        this.amount = type === 'Income' ? +amount : -amount;\n    }\n}\n\nclass App{\n    \n    #balance;\n    #movements;\n    constructor(){\n\n        if(localStorage.getItem('movements')){\n            this.#movements = JSON.parse(localStorage.getItem('movements'));\n        }else{\n            this.#movements = [];\n            localStorage.setItem('movements',[])\n        }\n\n        this.loadBalance()\n        this.renderBalance();\n        this.onLoad();\n        this.addHandler();\n\n        // console.log(this.#balance,this.#movements)\n    }\n    loadBalance(){\n        this.#balance = 0;\n        this.#movements.forEach(ele=>this.#balance+=ele.amount);\n\n        localStorage.setItem(`balance`,JSON.stringify(this.#balance))\n    }\n    updateBalance(amount){\n        this.#balance += amount;\n\n        localStorage.setItem('balance',this.#balance);\n    }\n    onLoad(){\n        let markup = `<thead>\n        <tr>\n            <th>Type</th>\n            <th>Description</th>\n            <th>Amount</th>\n            <th>Edit</th>\n        </tr>\n    </thead>`;\n        table.innerHTML = markup;\n        this.#movements.forEach(ele=>this.renderData(ele));\n    }\n    renderData(_data){\n        const  markup = `<tr class=\"data-field\" data-id=${_data.id}>\n        <td class=\"type-field\">${_data.type}</td>\n        <td class=\"description-field\">${_data.desp}</td>\n        <td class=\"amount-field\">${_data.amount}</td>\n        <td><button id='del-${_data.id}'>Delete</button></td>\n        </tr> `;\n        table.insertAdjacentHTML('beforeend',markup);\n        this.addDeleteButtonHandler(_data.id);\n    }\n    updateMovements(data){\n        // CHECK IF MOVMENT IS VALID\n        console.log(typeof data.amount)\n\n        this.#movements.push(data);\n        localStorage.setItem('movements',JSON.stringify(this.#movements));\n\n        this.updateBalance(data.amount);\n        this.renderData(data);\n        this.renderBalance();\n    }\n\n    renderBalance(){\n        balanceField.textContent = this.#balance;\n        this.#balance >= 0 ? balanceField.style.color = `green` : balanceField.style.color = `red`;\n    }\n    addData(e){\n        e.preventDefault();\n        let desp = null;\n        let check = false;\n        if(inputType.value === 'Select'){\n            desp = despError.textContent;\n            typeError.textContent = `Only Income and Expense are allowed!!!`\n            typeError.closest('.popup').classList.add('show');\n            check = true;\n        }\n        // console.log(inputDesp.value.length)\n        if(!inputDesp.value || inputDesp.value.length > 128){\n            despError.textContent = `Despcription should be between 1 and 128 characters, Thank you!`;\n            despError.closest('.popup').classList.add('show');\n            check = true;\n\n        }\n\n        if(!inputPrice.value || !Number(inputPrice.value)){\n            priceError.closest('.popup').classList.add('show');\n            check = true;\n        }\n        if(check){\n            return;\n        }\n        check = false;\n        despError.closest('.popup').classList.remove('show');   \n        typeError.closest('.popup').classList.remove('show');\n        priceError.closest('.popup').classList.remove('show');\n        this.updateMovements(new data(inputType.value,inputDesp.value,inputPrice.value));\n        this.clearInput();\n    }\n    clearInput(){\n        document.querySelectorAll('input').forEach(ele=>{\n            if(ele.type!=='submit') ele.value = '';\n        })\n        inputType.children[0].selected = true;\n        inputType.children[1].selected = false;\n        inputType.children[2].selected = false;\n        window.requestAnimationFrame(this.color.bind(this));\n    }\n    deleteMovement(id){\n        for(let i = 0;i < this.#movements.length; i++){\n            if(this.#movements[i].id === id)\n            {   this.#balance -= +this.#movements[i].amount;\n                localStorage.setItem('balance',this.#balance);\n                this.#movements.splice(i,1);\n                localStorage.setItem('movements',JSON.stringify(this.#movements))\n                break;\n            }\n        }\n        // console.log(document.getElementsByClassName('data-field'),`helllo`);\n        this.renderBalance();\n    }\n\n    color(){\n        if(inputType.value==='Income'){\n            inputSubmit.style.background = inputDesp.style.borderColor = inputPrice.style.borderColor = 'green';\n            inputSubmit.style.color = 'white';\n        }else if(inputType.value == 'Expense'){\n            inputSubmit.style.background = inputDesp.style.borderColor = inputPrice.style.borderColor = 'red';\n            inputSubmit.style.color = 'white';\n        }else{\n            inputSubmit.style.background = inputDesp.style.borderColor = inputPrice.style.borderColor = '';\n            inputSubmit.style.color = 'black';\n        }\n    }\n    addHandler(){\n        document.querySelector('#form').addEventListener('submit',this.addData.bind(this));\n        window.addEventListener('load',this.color.bind(this));\n        inputType.addEventListener('change',this.color.bind(this));\n    }\n    \n    \n    delButton(e){\n        let text = `Do you really want to delete the element`;\n        if (confirm(text)) {\n            this.deleteMovement(e.target.id.slice(4))\n            e.target.closest('.data-field').remove();\n        }\n    }\n\n    addDeleteButtonHandler(id){\n        document.querySelector(`#del-${id}`).addEventListener('click',this.delButton.bind(this));\n    }\n}\nconst app = new App();\n"],"names":["table","document","querySelector","balanceField","inputType","inputDesp","inputPrice","inputSubmit","despError","priceError","typeError","data","constructor","type","desp","amount","this","id","String","Date","getTime","slice","App","balance","movements","localStorage","getItem","JSON","parse","setItem","loadBalance","renderBalance","onLoad","addHandler","forEach","ele","stringify","updateBalance","innerHTML","renderData","_data","markup","insertAdjacentHTML","addDeleteButtonHandler","updateMovements","data1","console","log","push","textContent","style","color","addData","e","preventDefault","check","value","closest","classList","add","length","Number","remove","clearInput","querySelectorAll","children","selected","window","requestAnimationFrame","bind","deleteMovement","i","splice","background","borderColor","addEventListener","delButton","confirm","target","app"],"version":3,"file":"index.8bd12d7d.js.map"}