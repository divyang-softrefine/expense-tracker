{"mappings":"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","sources":["src/js/controller.js"],"sourcesContent":["const positive_table = document.querySelector('.table-positive');\nconst negative_table = document.querySelector('.table-negative');\nconst balanceField = document.querySelector('#current-balance');\nconst inputType = document.querySelector('#inputType');\nconst inputDesp = document.querySelector('#inputDesp');\nconst inputPrice = document.querySelector('#inputPrice');\nconst inputSubmit = document.querySelector('#submitBtn');\nconst despError = document.querySelector('#despError');\nconst priceError = document.querySelector('#priceError');\nconst typeError = document.querySelector('#typeError');\nconst totalPositive = document.querySelector('.positive').children[2].children[1];\nconst totalNegative = document.querySelector('.negative').children[2].children[1];\n\nclass data{\n    constructor(type,desp,amount){\n        this.id = String(new Date().getTime()).slice(6);\n        this.type = type;\n        this.desp = desp;\n        this.amount = +amount;\n    }\n}\n\nclass App{\n    \n    #balance;\n    #movements;\n    #positive_movements;\n    #negative_movements;\n    constructor(){\n\n        if(localStorage.getItem('positive-movements')){\n            this.#positive_movements = JSON.parse(localStorage.getItem('positive-movements'));\n\n        }else{\n            this.#positive_movements = [];\n            localStorage.setItem('positive-movements',[])\n        }\n        if(localStorage.getItem('negative-movements')){\n\n            this.#negative_movements = JSON.parse(localStorage.getItem('negative-movements'));\n        }else{\n            this.#negative_movements = [];\n            localStorage.setItem('negative-movements',[]);\n        }\n\n        this.loadBalance()\n        this.renderBalance();\n        this.onLoad();\n        this.addHandler();\n\n        // console.log(this.#balance,this.#movements)\n    }\n    loadBalance(){\n        this.#balance = 0;\n        this.#positive_movements.forEach(ele=>this.#balance+=ele.amount);\n        this.#negative_movements.forEach(ele=>this.#balance-=ele.amount);\n\n        localStorage.setItem(`balance`,JSON.stringify(this.#balance))\n    }\n    updateBalance(amount,negative = false){\n        if(negative)\n            this.#balance -= amount;\n        else\n            this.#balance += amount;\n\n        localStorage.setItem('balance',this.#balance);\n    }\n    onLoad(){\n        let markup = `<thead>\n        <tr>\n            <th>Description</th>\n            <th>Amount</th>\n            <th>Edit</th>\n        </tr>\n    </thead>`;\n        positive_table.innerHTML = markup;\n        this.#positive_movements.forEach(ele=>this.renderData(ele,positive_table));\n\n        negative_table.innerHTML = markup;\n        this.#negative_movements.forEach(ele=>this.renderData(ele,negative_table));\n    }\n    renderData(_data,table){\n        const  markup = `<tr class=\"data-field\" data-id=${_data.id}>\n        <td class=\"description-field\">${_data.desp}</td>\n        <td class=\"amount-field\">${_data.amount}</td>\n        <td><button id='del-${_data.id}'>Delete</button></td>\n        </tr> `;\n        table.insertAdjacentHTML('beforeend',markup);\n        this.addDeleteButtonHandler(_data.id);\n    }\n    updateMovements(data){\n        // CHECK IF MOVMENT IS VALID\n        // console.log(typeof data.amount)\n        if(data.type === 'Income'){\n            this.#positive_movements.push(data);\n\n            localStorage.setItem('positive-movements',JSON.stringify(this.#positive_movements));\n            this.updateBalance(data.amount);\n            this.renderData(data,positive_table);\n        }\n        else{\n            this.#negative_movements.push(data);\n            localStorage.setItem('negative-movements',JSON.stringify(this.#negative_movements));\n\n            this.updateBalance(data.amount,true);\n            this.renderData(data,negative_table);\n        }\n        this.renderBalance();\n    }\n\n    renderTotals(){\n        let neg_sum = 0;\n        for(let i = 0; i < this.#negative_movements.length; i++)\n            neg_sum+=this.#negative_movements[i].amount;\n        let pos_sum = 0;\n        for(let i = 0; i < this.#positive_movements.length; i++)\n            pos_sum+=this.#positive_movements[i].amount;\n        \n        totalNegative.textContent = neg_sum;\n        totalPositive.textContent = pos_sum;\n    }\n\n    renderBalance(){\n        balanceField.textContent = this.#balance;\n        this.#balance >= 0 ? balanceField.style.color = `green` : balanceField.style.color = `red`;\n\n        this.renderTotals();\n    }\n    addData(e){\n        e.preventDefault();\n        let desp = null;\n        let check = false;\n        if(inputType.value === 'Select'){\n            desp = despError.textContent;\n            typeError.textContent = `Only Income and Expense are allowed!!!`\n            typeError.closest('.popup').classList.add('show');\n            check = true;\n        }else{\n        typeError.closest('.popup').classList.remove('show');\n        }\n        // console.log(inputDesp.value.length)\n        if(!inputDesp.value ||(inputDesp.value && inputDesp.value.length > 128) ){\n            if(!inputDesp.value){\n                despError.textContent = `Please add Description`;\n                despError.closest('.popup').classList.add('show');\n                check = true;\n            }\n            if(inputDesp.value && inputDesp.value.length > 128){\n                despError.textContent = `Despcription should be between 1 and 128 characters, Thank you!`;\n                despError.closest('.popup').classList.add('show');\n                check = true;\n            }\n        }else{\n            despError.closest('.popup').classList.remove('show');\n        }\n\n        if(!inputPrice.value || !Number(inputPrice.value) ||Number(inputPrice.value) < 0){\n            priceError.closest('.popup').classList.add('show');\n            check = true;\n        }else{\n            priceError.closest('.popup').classList.remove('show');\n        }\n        if(check){\n            return;\n        }\n        check = false;\n        this.updateMovements(new data(inputType.value,inputDesp.value,inputPrice.value));\n        this.clearInput();\n    }\n    clearInput(){\n        document.querySelectorAll('input').forEach(ele=>{\n            if(ele.type!=='submit') ele.value = '';\n        })\n        inputType.children[0].selected = true;\n        inputType.children[1].selected = false;\n        inputType.children[2].selected = false;\n        window.requestAnimationFrame(this.color.bind(this));\n    }\n    deleteMovement(id){\n        for(let i = 0;i < this.#positive_movements.length; i++){\n            if(this.#positive_movements[i].id === id)\n            {   this.#balance -= +this.#positive_movements[i].amount;\n                localStorage.setItem('balance',this.#balance);\n                this.#positive_movements.splice(i,1);\n                localStorage.setItem('positive-movements',JSON.stringify(this.#positive_movements))\n                break;\n            }\n        }\n        for(let i = 0;i < this.#negative_movements.length; i++){\n            if(this.#negative_movements[i].id === id)\n            {   this.#balance -= +this.#negative_movements[i].amount;\n                localStorage.setItem('balance',this.#balance);\n                this.#negative_movements.splice(i,1);\n                localStorage.setItem('negative-movements',JSON.stringify(this.#negative_movements))\n                break;\n            }\n        }\n        // console.log(document.getElementsByClassName('data-field'),`helllo`);\n        this.renderBalance();\n    }\n\n    color(){\n        if(inputType.value==='Income'){\n            inputSubmit.style.background = inputDesp.style.borderColor = inputPrice.style.borderColor = 'green';\n            inputSubmit.style.color = 'white';\n        }else if(inputType.value == 'Expense'){\n            inputSubmit.style.background = inputDesp.style.borderColor = inputPrice.style.borderColor = 'red';\n            inputSubmit.style.color = 'white';\n        }else{\n            inputSubmit.style.background = inputDesp.style.borderColor = inputPrice.style.borderColor = '';\n            inputSubmit.style.color = 'black';\n        }\n    }\n    addHandler(){\n        document.querySelector('#form').addEventListener('submit',this.addData.bind(this));\n        window.addEventListener('load',this.color.bind(this));\n        inputType.addEventListener('change',this.color.bind(this));\n    }\n    \n    \n    delButton(e){\n        let text = `Do you really want to delete the element`;\n        if (confirm(text)) {\n            this.deleteMovement(e.target.id.slice(4))\n            e.target.closest('.data-field').remove();\n        }\n    }\n\n    addDeleteButtonHandler(id){\n        document.querySelector(`#del-${id}`).addEventListener('click',this.delButton.bind(this));\n    }\n}\nconst app = new App();\n"],"names":["positive_table","document","querySelector","negative_table","balanceField","inputType","inputDesp","inputPrice","inputSubmit","despError","priceError","typeError","totalPositive","children","totalNegative","data","constructor","type","desp","amount","this","id","String","Date","getTime","slice","App","balance","movements","positive_movements","negative_movements","localStorage","getItem","JSON","parse","setItem","loadBalance","renderBalance","onLoad","addHandler","forEach","ele","stringify","updateBalance","negative","markup","innerHTML","renderData","_data","table","insertAdjacentHTML","addDeleteButtonHandler","updateMovements","data1","push","renderTotals","neg_sum","i","length","pos_sum","i1","textContent","style","color","addData","e","preventDefault","check","value","closest","classList","add","remove","Number","clearInput","querySelectorAll","selected","window","requestAnimationFrame","bind","deleteMovement","splice","i2","background","borderColor","addEventListener","delButton","confirm","target","app"],"version":3,"file":"index.f082ab67.js.map"}