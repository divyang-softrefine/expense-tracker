{"mappings":"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","sources":["src/js/controller.js"],"sourcesContent":["const table = document.querySelector('.table');\nconst balanceField = document.querySelector('#current-balance')\n\nclass data{\n    constructor(type,desp,amount){\n        this.id = String(new Date().getTime()).slice(6);\n        this.type = type;\n        this.desp = desp;\n        this.amount = type === 'Income' ? +amount : -amount;\n    }\n}\n\nclass App{\n    \n    #balance;\n    #movements;\n    constructor(){\n\n        if(localStorage.getItem('movements')){\n            this.#movements = JSON.parse(localStorage.getItem('movements'));\n        }else{\n            this.#movements = [];\n            localStorage.setItem('movements',[])\n        }\n\n        this.loadBalance()\n        this.renderBalance();\n        this.onLoad();\n        this.addHandler();\n        this.addDeleteButtonHandler();\n    }\n    loadBalance(){\n        this.#balance = 0;\n        this.#movements.forEach(ele=>this.#balance+=ele.amount);\n\n        localStorage.setItem(`balance`,JSON.stringify(this.#balance))\n    }\n    updateBalance(amount){\n        this.#balance += amount;\n\n        localStorage.setItem('balance',this.#balance);\n    }\n    onLoad(){\n        let markup = `<thead>\n        <tr>\n            <th>Type</th>\n            <th>Description</th>\n            <th>Amount</th>\n            <th>Edit</th>\n        </tr>\n    </thead>${this.#movements.map(_data=>{return `<tr class=\"data-field\" data-id=${_data.id}>\n    <td class=\"type-field\">${_data.type}</td>\n    <td class=\"description-field\">${_data.desp}</td>\n    <td class=\"amount-field\">${_data.amount}</td>\n    <td><button class='deleteBtn'>Delete</button></td>\n    </tr> `}).join('')}`;\n    \n        table.innerHTML = markup;\n    }\n    renderData(_data){\n        const  markup = `<tr class=\"data-field\" data-id=${_data.id}>\n        <td class=\"type-field\">${_data.type}</td>\n        <td class=\"description-field\">${_data.desp}</td>\n        <td class=\"amount-field\">${_data.amount}</td>\n        <td><button class='deleteBtn'>Delete</button></td>\n        </tr> `;\n        table.insertAdjacentHTML('beforeend',markup);\n        this.addDeleteButtonHandler();\n    }\n    updateMovements(data){\n\n        this.#movements.push(data);\n        localStorage.setItem('movements',JSON.stringify(this.#movements))\n        const movement = this.#movements.at(-1)\n        this.updateBalance(movement.amount)\n        this.renderData(movement);\n        this.renderBalance();;\n    }\n\n    renderBalance(){\n        balanceField.textContent = this.#balance;\n        this.#balance >= 0 ? balanceField.style.color = `green` : balanceField.style.color = `red`;\n    }\n    addData(e){\n        e.preventDefault();\n        this.updateMovements(new data(\n            e.target.children[0].value,\n            e.target.children[1].value,\n            e.target.children[2].value));\n\n    }\n    deleteMovement(id){\n        for(let i = 0;i < this.#movements.length; i++){\n            if(this.#movements[i].id === id)\n            {   this.#balance -= +this.#movements[i].amount;\n                localStorage.setItem('balance',this.#balance);\n                this.#movements.splice(i,1);\n                localStorage.setItem('movements',JSON.stringify(this.#movements))\n                break;\n            }\n        }\n        this.onLoad();\n        this.addDeleteButtonHandler();\n        this.renderBalance();\n    }\n    addHandler(){\n        document.querySelector('#form').addEventListener('submit',this.addData.bind(this))\n    }\n\n    addDeleteButtonHandler(){\n        document.querySelectorAll('.deleteBtn').forEach(ele=>{\n            console.log(ele)\n            ele.addEventListener('click',function(e){\n                this.deleteMovement(e.target.closest('.data-field').dataset.id)\n            }.bind(this))\n        })\n    }\n}\nconst app = new App();\n"],"names":[],"version":3,"file":"index.62406edb.js.map","sourceRoot":"/__parcel_source_root/"}