{"mappings":"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","sources":["src/js/controller.js"],"sourcesContent":["const table = document.querySelector('.table');\nconst balanceField = document.querySelector('#current-balance');\nconst inputType = document.querySelector('#inputType');\nconst inputDesp = document.querySelector('#inputDesp');\nconst inputPrice = document.querySelector('#inputPrice');\nconst inputSubmit = document.querySelector('#submitBtn');\nconst despError = document.querySelector('#despError');\nconst priceError = document.querySelector('#priceError');\nclass data{\n    constructor(type,desp,amount){\n        this.id = String(new Date().getTime()).slice(6);\n        this.type = type;\n        this.desp = desp;\n        this.amount = type === 'Income' ? +amount : -amount;\n    }\n}\n\nclass App{\n    \n    #balance;\n    #movements;\n    constructor(){\n\n        if(localStorage.getItem('movements')){\n            this.#movements = JSON.parse(localStorage.getItem('movements'));\n        }else{\n            this.#movements = [];\n            localStorage.setItem('movements',[])\n        }\n\n        this.loadBalance()\n        this.renderBalance();\n        this.onLoad();\n        this.addHandler();\n\n        // console.log(this.#balance,this.#movements)\n    }\n    loadBalance(){\n        this.#balance = 0;\n        this.#movements.forEach(ele=>this.#balance+=ele.amount);\n\n        localStorage.setItem(`balance`,JSON.stringify(this.#balance))\n    }\n    updateBalance(amount){\n        this.#balance += amount;\n\n        localStorage.setItem('balance',this.#balance);\n    }\n    onLoad(){\n        let markup = `<thead>\n        <tr>\n            <th>Type</th>\n            <th>Description</th>\n            <th>Amount</th>\n            <th>Edit</th>\n        </tr>\n    </thead>`;\n        table.innerHTML = markup;\n        this.#movements.forEach(ele=>this.renderData(ele));\n    }\n    renderData(_data){\n        const  markup = `<tr class=\"data-field\" data-id=${_data.id}>\n        <td class=\"type-field\">${_data.type}</td>\n        <td class=\"description-field\">${_data.desp}</td>\n        <td class=\"amount-field\">${_data.amount}</td>\n        <td><button id='del-${_data.id}'>Delete</button></td>\n        </tr> `;\n        table.insertAdjacentHTML('beforeend',markup);\n        this.addDeleteButtonHandler(_data.id);\n    }\n    updateMovements(data){\n        // CHECK IF MOVMENT IS VALID\n        console.log(typeof data.amount)\n\n        this.#movements.push(data);\n        localStorage.setItem('movements',JSON.stringify(this.#movements));\n\n        this.updateBalance(data.amount);\n        this.renderData(data);\n        this.renderBalance();\n    }\n\n    renderBalance(){\n        balanceField.textContent = this.#balance;\n        this.#balance >= 0 ? balanceField.style.color = `green` : balanceField.style.color = `red`;\n    }\n    addData(e){\n        e.preventDefault();\n        let desp = null;\n        if(inputType.value === 'Select'){\n            desp = despError.textContent;\n            despError.textContent = `Only Income and Expense are allowed!!!`\n            despError.closest('.popup').classList.add('show');\n            return;\n        }\n\n        despError.closest('.popup').classList.remove('show');\n        // console.log(inputDesp.value.length)\n        if(!inputDesp.value || inputDesp.value.length > 128){\n            despError.textContent = `Despcription should be between 1 and 128 characters, Thank you!`;\n            despError.closest('.popup').classList.add('show');\n            return;\n        }\n        despError.closest('.popup').classList.remove('show');\n\n        if(!inputPrice.value || !Number(inputPrice.value)){\n            priceError.closest('.popup').classList.add('show');\n            return;\n        }else if(inputType.value === 'Expense' && Number(inputPrice.value) > this.#balance){\n            priceError.textContent = 'EXPENSE CANNOT EXCEED BALANCE';\n            priceError.closest('.popup').classList.add('show');\n            return;\n        }\n            priceError.closest('.popup').classList.remove('show');\n        this.updateMovements(new data(inputType.value,inputDesp.value,inputPrice.value));\n        this.clearInput();\n    }\n    clearInput(){\n        document.querySelectorAll('input').forEach(ele=>{\n            if(ele.type!=='submit') ele.value = '';\n        })\n        inputType.children[0].selected = true;\n        inputType.children[1].selected = false;\n        inputType.children[2].selected = false;\n        window.requestAnimationFrame(this.color.bind(this));\n    }\n    deleteMovement(id){\n        for(let i = 0;i < this.#movements.length; i++){\n            if(this.#movements[i].id === id)\n            {   this.#balance -= +this.#movements[i].amount;\n                localStorage.setItem('balance',this.#balance);\n                this.#movements.splice(i,1);\n                localStorage.setItem('movements',JSON.stringify(this.#movements))\n                break;\n            }\n        }\n        // console.log(document.getElementsByClassName('data-field'),`helllo`);\n        this.renderBalance();\n    }\n\n    color(){\n        if(inputType.value==='Income'){\n            inputSubmit.style.background = inputDesp.style.borderColor = inputPrice.style.borderColor = 'green';\n            inputSubmit.style.color = 'white';\n        }else if(inputType.value == 'Expense'){\n            inputSubmit.style.background = inputDesp.style.borderColor = inputPrice.style.borderColor = 'red';\n            inputSubmit.style.color = 'white';\n        }else{\n            inputSubmit.style.background = inputDesp.style.borderColor = inputPrice.style.borderColor = '';\n            inputSubmit.style.color = 'black';\n        }\n    }\n    addHandler(){\n        document.querySelector('#form').addEventListener('submit',this.addData.bind(this));\n        window.addEventListener('load',this.color.bind(this));\n        inputType.addEventListener('change',this.color.bind(this));\n    }\n    \n    \n    delButton(e){\n        let text = `Do you really want to delete the element`;\n        if (confirm(text)) {\n            this.deleteMovement(e.target.id.slice(4))\n            e.target.closest('.data-field').remove();\n        }\n    }\n\n    addDeleteButtonHandler(id){\n        document.querySelector(`#del-${id}`).addEventListener('click',this.delButton.bind(this));\n    }\n}\nconst app = new App();\n"],"names":["table","document","querySelector","balanceField","inputType","inputDesp","inputPrice","inputSubmit","despError","priceError","data","constructor","type","desp","amount","this","id","String","Date","getTime","slice","App","balance","movements","localStorage","getItem","JSON","parse","setItem","loadBalance","renderBalance","onLoad","addHandler","forEach","ele","stringify","updateBalance","innerHTML","renderData","_data","markup","insertAdjacentHTML","addDeleteButtonHandler","updateMovements","data1","console","log","push","textContent","style","color","addData","e","preventDefault","value","closest","classList","add","remove","length","Number","clearInput","querySelectorAll","children","selected","window","requestAnimationFrame","bind","deleteMovement","i","splice","background","borderColor","addEventListener","delButton","confirm","target","app"],"version":3,"file":"index.de8fd93a.js.map"}